# Progress Tracker UI 状态栏手动测试清单

## 测试环境
- 浏览器：Chrome/Firefox/Safari 最新版本
- 服务器地址：http://127.0.0.1:3737

## 启动服务器
```bash
python3 plugins/progress-tracker/hooks/scripts/progress_ui_server.py --port 3737
```

## 测试清单

### 1. 状态栏渲染测试（5 分钟）

#### 1.1 基本渲染
- [x] 页面加载后 10 秒内出现状态栏
- [x] 状态栏包含 5 个状态位 + 1 个刷新按钮
- [x] 状态位从左到右依次为：总进度、下一步、计划合规、风险阻塞、最近快照

#### 1.2 总进度显示
- [x] 显示格式：`4/12 (33%)`
- [x] 数字与实际 progress.json 一致

#### 1.3 下一步显示
- [x] 当前显示：`#5` 或 `Feature #5`
- [x] 鼠标悬停显示完整功能名称：`实现 6 状态 checkbox 渲染`

#### 1.4 计划合规显示
- [x] 当前显示：`N/A`（因为无 workflow_state）
- [x] 无颜色标记（灰色文本）

#### 1.5 风险阻塞显示
- [x] 当前显示：`正常`
- [x] 无颜色标记（因为 bugs 为空）

#### 1.6 最近快照显示
- [x] 当前显示：`暂无快照`（因为 checkpoints.json 不存在）

### 2. 抽屉交互测试（10 分钟）

#### 2.1 打开抽屉
- [x] 点击"总进度"状态位
- [x] 抽屉从右侧滑入（动画流畅，280ms）
- [x] 抽屉标题显示"总进度详情"
- [x] 抽屉内容显示功能列表（12 个 feature）

#### 2.2 功能列表渲染
- [x] 列表显示所有 12 个功能
- [x] 已完成功能（4 个）有绿色背景和 ✓ 标记
- [x] 待办功能（8 个）有白色背景和 ○ 标记
- [x] 每个功能显示 ID 和名称

#### 2.3 计划合规抽屉
- [x] 点击"计划合规"状态位
- [x] 抽屉显示"当前无活跃计划"
- [x] 显示建议操作：`/prog next`
- [-] 点击操作按钮能复制命令到剪贴板. TODO: 点击无任何反馈, 未实现复制功能

#### 2.4 下一步抽屉
- [x] 点击"下一步"状态位
- [x] 抽屉显示 Feature #5 的详情
- [x] 显示功能描述和测试步骤
- [x] 显示建议操作：`/prog next`

#### 2.5 风险阻塞抽屉
- [x] 点击"风险阻塞"状态位
- [x] 抽屉显示"当前无高风险问题"
- [x] 显示"项目运行正常，无阻塞性问题"

#### 2.6 快照历史抽屉
- [x] 点击"最近快照"状态位
- [x] 抽屉显示"暂无快照记录"
- [x] 显示"尚未创建任何进度快照"

#### 2.7 关闭抽屉
- [x] 点击关闭按钮（✕）
- [x] 抽屉滑出（动画流畅）
- [x] 点击页面其他区域不会关闭抽屉

### 3. 刷新机制测试（5 分钟）

#### 3.1 手动刷新
- [x] 点击刷新按钮（⟳）
- [x] 按钮旋转动画  (TODO: 好奇怪的动画)
- [x] 顶部状态栏显示"Status refreshed"
- [x] 状态位数据更新

#### 3.2 自动轮询  [TODO: 还没测试]
- [ ] 等待 30 秒
- [ ] 观察浏览器 Network 面板
- [ ] 看到自动发起 `/api/status-summary` 请求
- [ ] 状态位数据自动更新

### 4. 响应式设计测试（5 分钟）

#### 4.1 桌面端（宽度 > 900px） [TODO: 还没测试]
- [ ] 状态栏为单行显示
- [ ] 5 个状态位均匀分布
- [ ] 抽屉宽度为 420px

#### 4.2 移动端（宽度 < 900px） [TODO: 还没测试]
- [ ] 状态栏换行显示（每行 2 个状态位）
- [ ] 抽屉宽度为 100%（全屏）
- [ ] 打开抽屉时覆盖整个页面

### 5. 错误处理测试（5 分钟）

#### 5.1 网络错误
- [x] 关闭服务器
- [x] 刷新页面
- [x] 顶部状态栏显示错误提示
- [x] 状态位显示 "-/-" 等降级数据

#### 5.2 数据缺失
- [x] 重命名 `.claude/progress.json` 为 `.claude/progress.json.bak`
- [x] 刷新页面
- [x] 状态栏显示空态："0/0 (0%)"
- [x] 其他状态位显示降级数据 」(TODO: 文件是Unable to load file list. 状态是Failed to load status. 总进度/下一步没变 4/12(33%) #5)

### 6. 浏览器兼容性测试（10 分钟）

#### 6.1 Chrome
- [x] 所有功能正常工作
- [x] 动画流畅
- [x] 复制功能正常

#### 6.2 Firefox
- [x] 所有功能正常工作
- [x] 动画流畅
- [x] 复制功能正常

#### 6.3 Safari
- [x] 所有功能正常工作
- [x] 动画流畅
- [x] 复制功能正常

## 性能验证

### 加载性能
- [x] 页面首次加载时间 < 500ms
- [x] 状态栏首次渲染时间 < 100ms
- [x] API 响应时间 < 100ms

### 交互性能
- [x] 点击状态位到抽屉打开 < 300ms
- [x] 抽屉动画流畅（60fps）
- [x] 轮询不影响浏览器性能（CPU < 5%）

## 测试数据验证

### 当前项目实际数据
- 总进度：4/12 (33%)
- 下一步：Feature #5（实现 6 状态 checkbox 渲染）
- 计划合规：N/A（因为 current_feature_id 为 null）
- 风险阻塞：正常（因为 bugs 数组为空）
- 最近快照：暂无快照（因为 checkpoints.json 不存在）

### 验证方式
```bash
# 查看实际数据
cat .claude/progress.json | jq '.features | length'  # 应为 12
cat .claude/progress.json | jq '[.features[] | select(.completed)] | length'  # 应为 4
cat .claude/progress.json | jq '.current_feature_id'  # 应为 null
cat .claude/progress.json | jq '.bugs | length'  # 应为 0
ls .claude/checkpoints.json 2>/dev/null || echo "文件不存在"  # 应显示不存在
```

## 通过标准

✅ **核心功能**（必须全部通过）
- 状态栏 5 个状态位正确显示
- 抽屉打开/关闭动画流畅
- 所有 panel 详情正确渲染
- 手动刷新和自动轮询工作正常

✅ **交互体验**（至少 90% 通过）
- 点击交互响应迅速
- 动画流畅无卡顿
- 复制功能正常
- 错误处理优雅

✅ **兼容性**（至少 2 个浏览器通过）
- Chrome/Firefox/Safari 中至少 2 个正常工作

✅ **性能**（至少 80% 通过）
- 页面加载快速
- 轮询不影响性能

## 已知限制

1. **计划合规显示 N/A**
   - 原因：当前 `current_feature_id` 为 `null`，无活跃计划
   - 预期行为：开始下一个功能后会显示实际状态

2. **快照显示暂无快照**
   - 原因：`checkpoints.json` 文件不存在
   - 预期行为：创建快照后会显示实际时间

3. **风险阻塞显示正常**
   - 原因：`bugs` 数组为空
   - 预期行为：添加 bug 后会显示实际风险

## 测试完成签名

- 测试人：__________
- 测试日期：__________
- 通过项：______ / 总计 ______
- 备注：__________________
